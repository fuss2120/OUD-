<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link href="https://fonts.googleapis.com/css?family=Alatsi|Righteous&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="myStyle.css" />
    <meta charset="utf-8">
    <title>Login</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript">

      function passwordToggle() {
        var password = document.getElementById("password");

        if (password.type == "password" ){
          password.type = "text";
        }
        else{
          password.type = "password";
        }
      function userEntered(){
        alert("User successfully entered");
      }

      }

    </script>
  </head>
  <body>
    <div id="aligner">
      <font class=mainFont>
        <form id="loginForm" onsubmit="submitLogin(event)">
          Username<br>
          <input name="username" type="text" class="textEntry" ><br>
          Password<br>
          <input name="password" type=password class="textEntry" id="password"><br>
          <font size="4px">Show password</font>
          <input type=checkbox onclick="passwordToggle()"><br>
          <input class="a_button" type=submit value="Login" >
        </form>
      <p id="errorMessage" color="red"></p>
      </font>
    </div>
  </body>
  <script type="text/javascript">
    if (window.location.pathname === "/login") {
      document.getElementById("errorMessage").innerHTML = "Incorrect Username or Password";
    }

    function submitLogin(e) {
      e.preventDefault();
      $.post({
        url: '/login',
        data: $("#loginForm").serialize(),
        success: function(response) {
          if (response.success)
            window.location.assign("entry");
          else
            $("#errorMessage").html(response.errorMessage);
        }
      })
    }
  </script>
</html>
